
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Quantum Commerce | Xavier OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="guard.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --void-black: #020204; }
        body { font-family: 'Rajdhani', sans-serif; background: var(--void-black); color: #e0e0e0; }
        .quantum-panel { background: rgba(10, 14, 39, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .revenue-pill { background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); }
    </style>
</head>
<body class="min-h-screen">

    <header class="quantum-panel sticky top-0 z-50 px-6 py-4 border-b border-green-500/20">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <button onclick="window.location.href='index.html'" class="text-gray-400 hover:text-white transition">‚Üê Back to Hub</button>
                <h1 class="font-orbitron text-2xl font-bold text-green-400">QUANTUM COMMERCE</h1>
            </div>
            <div class="flex items-center gap-4">
                <div class="revenue-pill px-3 py-1 rounded-full text-xs text-green-400">
                    Platform Fee: 4%
                </div>
                <button onclick="XavierSecurity.logout()" class="text-red-400 text-sm">Logout</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-8">
        
        <!-- Stats Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="quantum-panel rounded-2xl p-5 border border-green-500/20">
                <div class="text-xs text-gray-400 mb-1">Auto-Imported Today</div>
                <div class="text-3xl font-bold text-green-400 font-orbitron" id="stat-imported">0</div>
            </div>
            <div class="quantum-panel rounded-2xl p-5">
                <div class="text-xs text-gray-400 mb-1">Avg Margin</div>
                <div class="text-3xl font-bold text-cyan-400 font-orbitron" id="stat-margin">0%</div>
            </div>
            <div class="quantum-panel rounded-2xl p-5">
                <div class="text-xs text-gray-400 mb-1">Live Inventory</div>
                <div class="text-3xl font-bold text-purple-400 font-orbitron" id="stat-inventory">0</div>
            </div>
            <div class="quantum-panel rounded-2xl p-5 border border-yellow-500/20">
                <div class="text-xs text-gray-400 mb-1">Platform Fees Paid</div>
                <div class="text-3xl font-bold text-yellow-400 font-orbitron" id="stat-fees">$0</div>
            </div>
        </div>

        <div class="grid lg:grid-cols-3 gap-6">
            
            <!-- Left: Import Controls -->
            <div class="space-y-6">
                <div class="quantum-panel rounded-2xl p-6 border border-green-500/30">
                    <h3 class="font-orbitron text-lg font-bold text-green-400 mb-4">AI Product Curator</h3>
                    <p class="text-xs text-gray-500 mb-4">4% platform fee auto-deducted on all sales</p>
                    
                    <div class="space-y-3 mb-4">
                        <select id="niche-select" class="w-full bg-black/50 border border-green-500/30 rounded-lg p-3 text-white text-sm">
                            <option value="tech">Tech & Gadgets</option>
                            <option value="fashion">Fashion & Apparel</option>
                            <option value="home">Home & Garden</option>
                        </select>
                    </div>

                    <button onclick="aiImportProducts()" class="w-full bg-gradient-to-r from-green-600 to-cyan-600 py-3 rounded-lg font-bold text-sm mb-3 hover:shadow-lg hover:shadow-green-500/20 transition">
                        ü§ñ AI Import Products
                    </button>
                </div>
            </div>

            <!-- Center: Product Grid -->
            <div class="lg:col-span-2">
                <div class="quantum-panel rounded-2xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-orbitron text-xl font-bold text-white">Curated Inventory</h3>
                        <input type="text" id="search-products" placeholder="Search..." 
                            class="bg-black/50 border border-gray-700 rounded-lg px-4 py-2 text-sm text-white w-48"
                            onkeyup="searchProducts()">
                    </div>

                    <div id="product-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Products injected here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const AI_PRODUCTS = [
            {id: 1, name: 'Neural Interface Headset', category: 'tech', cost: 45, price: 149, supplier: 'AliTrend', image: 'üéß'},
            {id: 2, name: 'Quantum Charger Pad', category: 'tech', cost: 12, price: 49, supplier: 'TechDrop', image: '‚ö°'},
            {id: 3, name: 'Holographic Watch', category: 'fashion', cost: 25, price: 89, supplier: 'FashionAI', image: '‚åö'},
            {id: 4, name: 'Smart Garden Hub', category: 'home', cost: 60, price: 199, supplier: 'HomeBot', image: 'üå±'},
            {id: 5, name: 'Nano Drone X1', category: 'tech', cost: 35, price: 129, supplier: 'DroneZone', image: 'üöÅ'},
            {id: 6, name: 'LED Face Mask', category: 'beauty', cost: 18, price: 79, supplier: 'BeautyAI', image: '‚ú®'}
        ];

        let myProducts = JSON.parse(localStorage.getItem('xavier_my_products') || '[]');
        let totalFeesPaid = 0;

        function init() {
            if (myProducts.length === 0) {
                myProducts = AI_PRODUCTS.slice(0, 3).map(p => ({...p, dateAdded: 'Just now'}));
                saveProducts();
            }
            renderProducts(myProducts);
            updateStats();
        }

        function aiImportProducts() {
            const btn = event.target;
            btn.innerHTML = '<span class="animate-pulse">ü§ñ Scanning...</span>';
            btn.disabled = true;

            setTimeout(() => {
                const selected = AI_PRODUCTS.sort(() => 0.5 - Math.random()).slice(0, 3);
                selected.forEach(p => {
                    if (!myProducts.find(mp => mp.id === p.id)) {
                        myProducts.unshift({...p, dateAdded: new Date().toLocaleTimeString()});
                    }
                });
                
                saveProducts();
                renderProducts(myProducts);
                updateStats();
                
                btn.innerHTML = '‚úÖ Imported 3 Products';
                setTimeout(() => {
                    btn.innerHTML = 'ü§ñ AI Import Products';
                    btn.disabled = false;
                }, 2000);
            }, 1500);
        }

        function renderProducts(products) {
            const grid = document.getElementById('product-grid');
            if (products.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center text-gray-500 py-12">No products.</div>';
                return;
            }

            grid.innerHTML = products.map((p, idx) => `
                <div class="quantum-panel rounded-xl p-4 border border-green-500/20">
                    <div class="text-4xl mb-3 text-center py-4 bg-black/30 rounded-lg">${p.image}</div>
                    <h4 class="font-bold text-white mb-1 truncate">${p.name}</h4>
                    <div class="text-xs text-gray-500 mb-3">${p.supplier}</div>
                    
                    <div class="grid grid-cols-2 gap-2 mb-3 text-sm">
                        <div class="bg-black/30 p-2 rounded">
                            <div class="text-xs text-gray-500">Cost</div>
                            <div class="text-red-400">$${p.cost}</div>
                        </div>
                        <div class="bg-black/30 p-2 rounded">
                            <div class="text-xs text-gray-500">Sell</div>
                            <div class="text-green-400 font-bold">$${p.price}</div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center bg-green-900/20 border border-green-500/30 rounded-lg p-2 mb-3">
                        <span class="text-xs text-gray-400">Profit</span>
                        <span class="text-green-400 font-bold">+$${p.price - p.cost}</span>
                    </div>

                    <button onclick="pushToStore(${idx})" class="w-full bg-green-600 hover:bg-green-500 text-black py-2 rounded text-sm font-bold transition">
                        Push to Store (4% fee)
                    </button>
                </div>
            `).join('');
        }

        function pushToStore(idx) {
            const p = myProducts[idx];
            const fee = p.price * 0.04;
            const net = p.price - fee;
            
            if (confirm(`Push ${p.name} to store?\n\nSale Price: $${p.price}\nPlatform Fee (4%): $${fee.toFixed(2)}\nYou Receive: $${net.toFixed(2)}`)) {
                // Track revenue
                if (window.XavierRevenue) {
                    XavierRevenue.addShopSale(p.price);
                } else {
                    const current = parseFloat(localStorage.getItem('xavier_revenue_commerce') || '0');
                    localStorage.setItem('xavier_revenue_commerce', (current + fee).toFixed(2));
                }
                
                totalFeesPaid += fee;
                document.getElementById('stat-fees').textContent = '$' + totalFeesPaid.toFixed(2);
                
                alert(`üöÄ Listed!\n\nPlatform fee of $${fee.toFixed(2)} contributed to Xavier ecosystem.`);
            }
        }

        function updateStats() {
            const total = myProducts.length;
            const avgMargin = total > 0 ? (myProducts.reduce((sum, p) => sum + ((p.price - p.cost) / p.cost * 100), 0) / total).toFixed(1) : 0;
            
            document.getElementById('stat-imported').textContent = total;
            document.getElementById('stat-margin').textContent = avgMargin + '%';
            document.getElementById('stat-inventory').textContent = total;
        }

        function saveProducts() {
            localStorage.setItem('xavier_my_products', JSON.stringify(myProducts));
            localStorage.setItem('xavier_shop_count', myProducts.length.toString());
        }

        function searchProducts() {
            const query = document.getElementById('search-products').value.toLowerCase();
            const filtered = myProducts.filter(p => p.name.toLowerCase().includes(query));
            renderProducts(filtered);
        }

        init();
    </script>
</body>
</html>
